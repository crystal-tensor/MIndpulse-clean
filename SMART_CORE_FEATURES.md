# 智核交互界面功能说明

## 功能概览

智核交互界面已按照您的要求进行了全面升级，现在包含以下完整功能：

### 1. 完整设置系统 ✅

**大模型设置**
- 支持多个提供商：DeepSeek、OpenAI、Claude、Gemini、通义千问
- 模型选择、API密钥配置、温度调节
- 基础URL自定义、流式响应开关
- 与命运织机使用相同的设置存储键：`mindpulse-llm-settings`

**系统设置**
- 风险偏好调节（保守 ↔ 激进）
- 语言设置（中文/英文）
- 主题设置（深色/浅色/跟随系统）
- 邮件通知、自动保存开关
- 设置存储键：`mindpulse-system-settings`

**数据管理**
- 对话数据统计和导出
- 图谱数据统计和导出
- 临时文件清理功能
- 一键重置所有数据（不可恢复）

### 2. 智能对话系统 ✅

**实时AI对话**
- 支持所有配置的大模型提供商
- 自动读取设置进行API调用
- 错误处理和用户友好提示
- API路由：`/api/mindpilot/chat`

**对话管理**
- ChatGPT风格的侧边栏
- 新建、保存、加载、重命名、删除对话
- 对话历史持久化存储
- API路由：`/api/mindpilot/conversations`

### 3. 知识图谱系统 ✅

**自动图谱生成**
- 有对话内容即立刻生成2D知识图谱
- 从所有对话历史生成图谱
- 支持时间范围筛选（全部对话/自定义时间段）

**2D/3D图谱支持**
- 默认生成2D知识拓扑图谱
- 用户点击"生成3D图谱"按钮生成三维图谱
- 实时切换2D/3D视图
- API路由：`/api/mindpilot/generate-graph`

**图谱功能**
- 自动实体提取和关系识别
- SVG格式图谱可视化
- 图谱历史记录保存
- 支持不同时间段的图谱对比

### 4. 成长对比分析 ✅

**智能对比模式**
- 默认与上次对话的知识图谱对比
- 支持自定义时间段对比
- 实时统计对话数量、知识节点、图谱生成数

**成长可视化**
- 当前vs历史图谱并排对比
- 知识节点增长统计
- 连接关系增长分析
- 图谱复杂度和知识结构优化洞察

**成长洞察**
- 节点数量变化追踪
- 关系网络扩展分析
- 知识结构演进可视化

### 5. 界面设计 ✅

**ChatGPT风格布局**
- 左侧对话历史侧边栏
- 顶部视图模式切换（双栏/对话/图谱/成长/设置）
- 右上角设置按钮
- 保持MindPulse原有青紫渐变配色

**响应式设计**
- 双栏模式支持拖拽调整比例
- 各视图模式独立优化
- 玻璃态效果和现代UI设计

## API接口文档

### 1. 聊天接口
```
POST /api/mindpilot/chat
Content-Type: application/json

{
  "message": "用户消息",
  "user_id": "用户ID",
  "model": "模型名称",
  "temperature": 0.7,
  "provider": "deepseek|openai|claude",
  "apiKey": "API密钥",
  "base_url": "可选的基础URL"
}
```

### 2. 对话管理接口
```
GET /api/mindpilot/conversations - 获取对话列表
POST /api/mindpilot/conversations - 保存新对话
PUT /api/mindpilot/conversations - 更新对话名称
DELETE /api/mindpilot/conversations - 删除对话
```

### 3. 图谱生成接口
```
POST /api/mindpilot/generate-graph
Content-Type: application/json

{
  "messages": [对话消息数组],
  "graph_type": "2d|3d",
  "user_id": "用户ID",
  "time_range": {
    "start": "开始日期",
    "end": "结束日期"
  }
}
```

### 4. 文件管理接口
```
GET /api/mindpilot/files?user_id=xxx - 获取文件列表
POST /api/mindpilot/files - 上传文件
```

## 使用指南

### 首次使用
1. 点击右上角设置按钮
2. 在"大模型设置"中配置API密钥
3. 选择合适的模型和参数
4. 保存设置后开始对话

### 知识图谱使用
1. 开始任意对话，系统自动生成2D图谱
2. 在图谱视图中点击"生成3D图谱"获得三维可视化
3. 使用时间范围筛选功能分析特定时期的知识结构

### 成长分析使用
1. 进行多次对话后访问"成长"标签
2. 查看知识节点增长和图谱演进
3. 使用自定义时间段对比功能分析学习进展

## 技术特性

- **实时响应**：对话即时生成图谱，无需等待
- **数据持久化**：所有对话和图谱数据本地存储
- **错误处理**：完善的错误提示和恢复机制
- **性能优化**：图谱生成和渲染优化
- **扩展性**：模块化设计，易于添加新功能

## 注意事项

1. 首次使用需要配置API密钥
2. 图谱生成需要有对话内容
3. 成长对比需要至少2个图谱数据
4. 数据重置操作不可恢复，请谨慎使用

所有功能已完全实现并可正常使用！🎉 