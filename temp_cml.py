
import matplotlib.pyplot as plt
import numpy as np
from matplotlib import rcParams

# 设置中文字体
rcParams['font.sans-serif'] = ['SimHei', 'Arial Unicode MS', 'DejaVu Sans']
rcParams['axes.unicode_minus'] = False

# 数据
efficient_frontier_risk = [0.279425793796576,0.27690724141543754,0.2714025901138161,0.2692466216891109,0.2712686352735253,0.2684469492871817,0.26174010141856324,0.2611054602027467,0.25320015437821686,0.25197744551819434,0.2557966320162401,0.24647689027237793,0.24498578933634307,0.24248160662432783,0.24300580599270621,0.24789865799521002,0.23607610691071435,0.2354391265967098,0.23781299031713896,0.2327054093141147,0.2305372422654315,0.24135690104791488,0.2306452755721086,0.22671112750914213,0.22821063308549375,0.23579829228374413,0.23193474082039192,0.22865558764852928,0.2241539829705861,0.2326334670504736,0.2223710277105939,0.22269468837616593,0.22122211904173783,0.2225559157271464,0.2217039611433619,0.2237807745481129,0.21831167276037394,0.2230771228618739,0.2218527504574889,0.22239793338359826,0.21980800892372096,0.22150924898930044,0.2183964277606279,0.21686629245989703,0.22512294054779994,0.22003201765817174,0.21765528904951417,0.22066071700621484,0.22035492791152372,0.21906270503462766,0.22281127141064014,0.2232638198366637,0.21937352835687052,0.22199223668549622,0.23195290235393817,0.22294670216719092,0.22363645373882002,0.2229816792896914,0.22336721799754472,0.23519333344758453,0.23750998912868818,0.2321592124367585,0.2272157346585615,0.23677691348494745]
efficient_frontier_return = [-0.017052513741812422,-0.011982513390227378,-0.006912513038642321,-0.0018425126870572767,0.0032274876645277673,0.008297488016112825,0.013367488367697869,0.018437488719282913,0.02350748907086797,0.028577489422453015,0.033647489774038045,0.03871749012562309,0.043787490477208146,0.048857490828793176,0.053927491180378234,0.05899749153196329,0.06406749188354832,0.06913749223513338,0.07420749258671844,0.07927749293830347,0.08434749328988853,0.08941749364147356,0.09448749399305861,0.09955749434464364,0.10462749469622873,0.10969749504781376,0.11476749539939882,0.11983749575098385,0.1249074961025689,0.12997749645415393,0.13504749680573902,0.14011749715732405,0.1451874975089091,0.15025749786049414,0.15532749821207917,0.16039749856366423,0.16546749891524926,0.1705374992668343,0.17560749961841937,0.18067749997000443,0.18574750032158943,0.19081750067317454,0.19588750102475955,0.2009575013763446,0.20602750172792966,0.21109750207951472,0.21616750243109972,0.22630750313426984,0.2313775034858549,0.23644750383743995,0.24151750418902496,0.24658750454061001,0.25672750524378013,0.2617975055953652,0.2668675059469502,0.2719375062985353,0.2770075066501203,0.28207750700170536,0.28714750735329037,0.29728750805646054,0.30235750840804554,0.3074275087596306,0.31249750911121565,0.3175675094628007]
cml_risk = [0,0.01,0.02,0.03,0.04,0.05,0.060000000000000005,0.07,0.08,0.09,0.09999999999999999,0.10999999999999999,0.11999999999999998,0.12999999999999998,0.13999999999999999,0.15,0.16,0.17,0.18000000000000002,0.19000000000000003,0.20000000000000004,0.21000000000000005,0.22000000000000006,0.23000000000000007,0.24000000000000007,0.25000000000000006,0.26000000000000006,0.2700000000000001,0.2800000000000001,0.2900000000000001,0.3000000000000001,0.3100000000000001,0.3200000000000001,0.3300000000000001]
cml_return = [0.02,0.03287311856068214,0.04574623712136428,0.05861935568204642,0.07149247424272856,0.0843655928034107,0.09723871136409284,0.11011182992477499,0.12298494848545713,0.13585806704613926,0.1487311856068214,0.16160430416750352,0.17447742272818564,0.18735054128886777,0.20022365984954993,0.21309677841023208,0.22596989697091424,0.23884301553159637,0.25171613409227855,0.2645892526529607,0.27746237121364287,0.290335489774325,0.3032086083350072,0.3160817268956893,0.3289548454563715,0.34182796401705356,0.35470108257773575,0.3675742011384179,0.38044731969910006,0.3933204382597822,0.4061935568204643,0.4190666753811465,0.43193979394182863,0.4448129125025108]
market_risk = 0.2272157346585615
market_return = 0.31249750911121565

# 创建图表
plt.figure(figsize=(10, 8))
plt.plot(efficient_frontier_risk, efficient_frontier_return, 'r-', label='有效前沿', linewidth=2.5)
plt.plot(cml_risk, cml_return, 'b--', label='资本市场线', linewidth=2.5)
plt.plot(market_risk, market_return, 'g*', label='市场组合', markersize=15)
plt.plot(0, 0.02, 'ko', label='无风险资产', markersize=8)

plt.xlabel('风险（波动率）', fontsize=13)
plt.ylabel('预期收益率', fontsize=13)
plt.title('资本市场线与有效前沿', fontsize=15, fontweight='bold')
plt.legend(fontsize=12)
plt.grid(True, alpha=0.3)
plt.tight_layout()

# 保存图片
plt.savefig('public/cml_visualization.png', dpi=300, bbox_inches='tight')
plt.close()
print("资本市场线图表已保存到 public/cml_visualization.png")
