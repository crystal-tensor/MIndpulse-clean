"use strict";exports.id=659,exports.ids=[659],exports.modules={9659:(e,t,r)=>{r.d(t,{default:()=>k});var a=r(326),s=r(7577);let l=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"}))}),n=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"}))});var o=r(575);let i=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-2.25-1.313M21 7.5v2.25m0-2.25-2.25 1.313M3 7.5l2.25-1.313M3 7.5l2.25 1.313M3 7.5v2.25m9 3 2.25-1.313M12 12.75l-2.25-1.313M12 12.75V15m0 6.75 2.25-1.313M12 21.75V19.5m0 2.25-2.25-1.313m0-16.875L12 2.25l2.25 1.313M21 14.25v2.25l-2.25 1.313m-13.5 0L3 16.5v-2.25"}))});var c=r(6041),d=r(3351);let m=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))});var u=r(3339);let h=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});var x=r(6386);let g=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))});var p=r(7710);let b=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"}))}),y=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"}))}),v=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}),f=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}),w=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}),j=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))});var N=r(1135);function k(){let[e,t]=(0,s.useState)([]),[r,k]=(0,s.useState)(""),[E,C]=(0,s.useState)(!1),[L,M]=(0,s.useState)("knowledge-graph"),[_,S]=(0,s.useState)(!1),[A,O]=(0,s.useState)({provider:"deepseek",apiKey:"",modelName:"deepseek-chat",baseUrl:"https://api.deepseek.com/v1",temperature:.7,contextWindow:4e3,streamingResponse:!1}),[R,W]=(0,s.useState)([]),[Z,H]=(0,s.useState)(!1),[B,V]=(0,s.useState)(!1),[$,I]=(0,s.useState)(""),[z,T]=(0,s.useState)(""),[K,P]=(0,s.useState)(""),[D,J]=(0,s.useState)([]),[F,U]=(0,s.useState)(!1),[G,Y]=(0,s.useState)({"knowledge-graph":"","thought-chain":"","cognitive-map":"","decision-model":""}),[q,Q]=(0,s.useState)("both"),[X,ee]=(0,s.useState)(40),et=(0,s.useRef)(null),er=(0,s.useRef)(null),ea=(0,s.useRef)(`user_${Math.random().toString(36).substring(2,9)}`),es=async()=>{if(!r.trim()||E)return;if(!A.apiKey){eu("请先在设置中配置API密钥","error"),S(!0);return}let e={role:"user",content:r};t(t=>[...t,e]),k(""),C(!0);try{let e=await fetch("/api/mindpilot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,user_id:ea.current,model:A.modelName,temperature:A.temperature,stream:A.streamingResponse,provider:A.provider,apiKey:A.apiKey,base_url:A.baseUrl})});if(!e.ok){let t=await e.json();throw Error(t.error||"网络响应异常")}let a=await e.json(),s={role:"assistant",content:a.response,formatted_content:a.response};t(e=>[...e,s]),a.knowledge_graph_url&&Y(e=>({...e,"knowledge-graph":a.knowledge_graph_url,"thought-chain":a.thought_chain_url||"","cognitive-map":a.cognitive_map_url||"","decision-model":a.decision_model_url||""}))}catch(e){console.error("发送消息失败:",e),eu(`发送失败: ${e instanceof Error?e.message:"未知错误"}`,"error")}finally{C(!1)}},el=async()=>{try{let e=await fetch("/api/mindpilot/conversations");if(e.ok){let t=await e.json();W(t.conversations||[])}}catch(e){console.error("加载对话列表失败:",e)}},en=async()=>{if(!$.trim()){eu("请输入对话名称","error");return}try{if((await fetch("/api/mindpilot/save_conversation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:ea.current,conversation_name:$,chat_history:e})})).ok)eu("对话保存成功！","success"),H(!1),I(""),el();else throw Error("保存失败")}catch(e){console.error("保存对话失败:",e),eu("保存对话失败","error")}},eo=async e=>{try{let r=await fetch(`/api/mindpilot/load_conversation/${e}`);if(r.ok){let e=await r.json();t(e.chat_history||[]),eu(`对话"${e.name}"加载成功！`,"success")}}catch(e){console.error("加载对话失败:",e),eu("加载对话失败","error")}},ei=async e=>{if(confirm("确定要删除这个对话吗？"))try{(await fetch(`/api/mindpilot/delete_conversation/${e}`,{method:"DELETE"})).ok&&(eu("对话删除成功","success"),el())}catch(e){console.error("删除对话失败:",e),eu("删除对话失败","error")}},ec=async(e="2d")=>{try{let t=await fetch("/api/mindpilot/generate_graph",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:ea.current,graph_type:e})});if(t.ok){let e=await t.json();Y(t=>({...t,"knowledge-graph":e.graph_url})),eu("知识图谱生成成功！","success")}}catch(e){console.error("生成图谱失败:",e),eu("生成图谱失败","error")}},ed=async e=>{let t=e.target.files;if(!t||0===t.length)return;U(!0);let r=new FormData;for(let e=0;e<t.length;e++)r.append("files",t[e]);try{let e=await fetch("/api/mindpilot/upload",{method:"POST",body:r});if(e.ok){let t=await e.json();eu(`成功上传 ${t.uploaded_files?.length||0} 个文件`,"success"),em()}}catch(e){console.error("文件上传失败:",e),eu("文件上传失败","error")}finally{U(!1)}},em=async()=>{try{let e=await fetch("/api/mindpilot/uploaded_files");if(e.ok){let t=await e.json();J(t.files||[])}}catch(e){console.error("加载文件列表失败:",e)}},eu=(e,t="success")=>{console.log(`${t.toUpperCase()}: ${e}`)},eh=e=>({"knowledge-graph":l,"thought-chain":n,"cognitive-map":o.Z,"decision-model":i})[e]||c.Z;return(0,a.jsxs)("div",{className:"h-full bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-cyan-500/5 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-0 right-1/4 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000"}),a.jsx("div",{className:"absolute top-1/2 left-0 w-64 h-64 bg-yellow-500/5 rounded-full blur-3xl animate-pulse delay-2000"})]}),(0,a.jsxs)("div",{className:"relative z-10 h-full flex",children:[(0,a.jsxs)("div",{className:"w-80 bg-gray-800/50 backdrop-blur-xl border-r border-cyan-500/20 flex flex-col",children:[a.jsx("div",{className:"p-6 border-b border-gray-700/50",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-400 to-purple-500 rounded-lg flex items-center justify-center",children:a.jsx(d.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"智核交互"}),a.jsx("p",{className:"text-xs text-gray-400",children:"AI Cognitive Interface"})]})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>S(!_),className:"w-full flex items-center space-x-3 px-4 py-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-all duration-300 group",children:[a.jsx(m,{className:"w-5 h-5 text-gray-400 group-hover:text-cyan-400"}),a.jsx("span",{className:"text-sm",children:"模型设置"})]}),(0,a.jsxs)("button",{onClick:()=>H(!0),className:"w-full flex items-center space-x-3 px-4 py-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-all duration-300 group",children:[a.jsx(u.Z,{className:"w-5 h-5 text-gray-400 group-hover:text-green-400"}),a.jsx("span",{className:"text-sm",children:"保存对话"})]}),(0,a.jsxs)("button",{onClick:()=>er.current?.click(),className:"w-full flex items-center space-x-3 px-4 py-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-all duration-300 group",children:[a.jsx(h,{className:"w-5 h-5 text-gray-400 group-hover:text-purple-400"}),a.jsx("span",{className:"text-sm",children:"上传文件"}),F&&a.jsx("div",{className:"w-4 h-4 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"})]}),(0,a.jsxs)("button",{onClick:()=>ec("3d"),className:"w-full flex items-center space-x-3 px-4 py-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-all duration-300 group",children:[a.jsx(x.Z,{className:"w-5 h-5 text-gray-400 group-hover:text-yellow-400"}),a.jsx("span",{className:"text-sm",children:"生成图谱"})]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-700/50",children:[a.jsx("h4",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3",children:"界面布局"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{mode:"both",icon:g,label:"双栏"},{mode:"chat-only",icon:p.Z,label:"对话"},{mode:"visualization-only",icon:b,label:"可视化"}].map(({mode:e,icon:t,label:r})=>(0,a.jsxs)("button",{onClick:()=>Q(e),className:(0,N.W)("flex flex-col items-center space-y-1 p-2 rounded-lg transition-all duration-300",q===e?"bg-cyan-500/20 border border-cyan-500/50 text-cyan-400":"bg-gray-700/50 hover:bg-gray-600/50 text-gray-400"),children:[a.jsx(t,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs",children:r})]},e))})]}),(0,a.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto",children:[a.jsx("h4",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3",children:"对话历史"}),a.jsx("div",{className:"space-y-2",children:R.map(e=>(0,a.jsxs)("div",{className:"bg-gray-700/30 rounded-lg p-3 hover:bg-gray-600/30 transition-all duration-300 group",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h5",{className:"text-sm font-medium text-white truncate",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>eo(e.id),className:"p-1 hover:bg-cyan-500/20 rounded text-cyan-400",children:a.jsx(y,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{T(e.id),P(e.name),V(!0)},className:"p-1 hover:bg-yellow-500/20 rounded text-yellow-400",children:a.jsx(v,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>ei(e.id),className:"p-1 hover:bg-red-500/20 rounded text-red-400",children:a.jsx(f,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[e.message_count," 条消息 • ",new Date(e.created_at).toLocaleDateString()]})]},e.id))})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-700/50",children:[a.jsx("h4",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3",children:"已上传文件"}),a.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:D.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-700/30 rounded p-2",children:[a.jsx("div",{className:"text-xs font-medium text-white truncate",children:e.filename}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[(e.file_size/1024).toFixed(1)," KB"]})]},t))})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[_&&a.jsx("div",{className:"bg-gray-800/90 backdrop-blur-xl border-b border-cyan-500/20 p-6",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"模型配置"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"提供方"}),(0,a.jsxs)("select",{value:A.provider,onChange:e=>O(t=>({...t,provider:e.target.value})),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[a.jsx("option",{value:"deepseek",children:"DeepSeek"}),a.jsx("option",{value:"openai",children:"OpenAI"}),a.jsx("option",{value:"gemini",children:"Google Gemini"}),a.jsx("option",{value:"claude",children:"Anthropic Claude"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"API密钥"}),a.jsx("input",{type:"password",value:A.apiKey,onChange:e=>O(t=>({...t,apiKey:e.target.value})),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"输入API密钥..."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"模型名称"}),a.jsx("input",{type:"text",value:A.modelName,onChange:e=>O(t=>({...t,modelName:e.target.value})),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["温度 (",A.temperature,")"]}),a.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:A.temperature,onChange:e=>O(t=>({...t,temperature:parseFloat(e.target.value)})),className:"w-full"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"上下文窗口"}),a.jsx("input",{type:"number",value:A.contextWindow,onChange:e=>O(t=>({...t,contextWindow:parseInt(e.target.value)})),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:A.streamingResponse,onChange:e=>O(t=>({...t,streamingResponse:e.target.checked})),className:"mr-2"}),a.jsx("label",{className:"text-sm text-gray-300",children:"流式响应"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end mt-4 space-x-3",children:[a.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-white transition-colors",children:"取消"}),a.jsx("button",{onClick:()=>{try{localStorage.setItem("mindpilot_settings",JSON.stringify(A)),eu("设置已保存","success")}catch(e){console.error("保存设置失败:",e),eu("保存设置失败","error")}},className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-400 hover:to-purple-400 rounded-lg text-white transition-colors",children:"保存设置"})]})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[("both"===q||"chat-only"===q)&&(0,a.jsxs)("div",{className:"bg-gray-800/30 backdrop-blur-xl border-b border-gray-700/50 flex flex-col",style:{height:"chat-only"===q?"100%":`${X}%`,minHeight:"both"===q?"200px":"auto"},children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.map((e,t)=>a.jsx("div",{className:(0,N.W)("flex","user"===e.role?"justify-end":"justify-start"),children:a.jsx("div",{className:(0,N.W)("max-w-[80%] rounded-2xl px-6 py-4 shadow-lg","user"===e.role?"bg-gradient-to-r from-cyan-500 to-purple-500 text-white":"bg-gray-700/50 backdrop-blur-xl border border-gray-600/50 text-gray-100"),children:a.jsx("div",{dangerouslySetInnerHTML:{__html:e.formatted_content||e.content}})})},t)),E&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-gray-700/50 backdrop-blur-xl border border-gray-600/50 rounded-2xl px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),a.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse delay-100"}),a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse delay-200"}),a.jsx("span",{className:"text-gray-300 ml-2",children:"AI正在思考..."})]})})}),a.jsx("div",{ref:et})]}),a.jsx("div",{className:"p-6 border-t border-gray-700/50",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[a.jsx("div",{className:"flex-1 relative",children:a.jsx("input",{type:"text",value:r,onChange:e=>k(e.target.value),onKeyPress:e=>"Enter"===e.key&&es(),placeholder:"探索你的认知边界，输入任何想法...",disabled:E,className:"w-full bg-gray-700/50 backdrop-blur-xl border border-gray-600/50 rounded-2xl px-6 py-4 text-white placeholder-gray-400 focus:border-cyan-500/50 focus:ring-2 focus:ring-cyan-500/20 transition-all duration-300"})}),a.jsx("button",{onClick:es,disabled:E||!r.trim(),className:"bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-400 hover:to-purple-400 disabled:from-gray-600 disabled:to-gray-700 rounded-2xl px-6 py-4 text-white transition-all duration-300 shadow-lg",children:E?a.jsx(w,{className:"w-6 h-6"}):a.jsx(j,{className:"w-6 h-6"})})]})})]}),"both"===q&&a.jsx("div",{className:"h-2 bg-gray-700/50 cursor-row-resize hover:bg-cyan-500/30 transition-colors relative group",onMouseDown:e=>{let t=e.clientY,r=e=>{ee(Math.max(20,Math.min(80,X+(e.clientY-t)/(window.innerHeight-200)*100)))},a=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",a)},children:a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-1 bg-gray-500 rounded-full group-hover:bg-cyan-400 transition-colors"})})}),("both"===q||"visualization-only"===q)&&(0,a.jsxs)("div",{className:"bg-gray-800/30 backdrop-blur-xl flex flex-col",style:{height:"visualization-only"===q?"100%":`${100-X}%`,minHeight:"both"===q?"200px":"auto"},children:[a.jsx("div",{className:"flex space-x-1 p-4 border-b border-gray-700/50",children:Object.keys(G).map(e=>{let t=eh(e);return(0,a.jsxs)("button",{onClick:()=>M(e),className:(0,N.W)("flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-300",L===e?"bg-gradient-to-r from-cyan-500/20 to-purple-500/20 border border-cyan-500/50 text-cyan-400":"bg-gray-700/30 hover:bg-gray-600/30 text-gray-400 hover:text-white"),children:[a.jsx(t,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:{"knowledge-graph":"知识图谱","thought-chain":"思维链","cognitive-map":"认知图谱","decision-model":"决策模型"}[e]})]},e)})}),a.jsx("div",{className:"flex-1 p-6 overflow-auto",children:G[L]?a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx("img",{src:G[L],alt:`${L} visualization`,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"})}):a.jsx("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-cyan-400/20 to-purple-500/20 rounded-2xl flex items-center justify-center mb-4 mx-auto",children:a.jsx(c.Z,{className:"w-12 h-12 text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"等待数据生成"}),a.jsx("p",{className:"text-gray-500",children:"开始对话以生成可视化图谱"})]})})})]})]})]})]}),a.jsx("input",{ref:er,type:"file",multiple:!0,accept:".pdf,.doc,.docx",onChange:ed,className:"hidden"}),Z&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 border border-cyan-500/30 rounded-2xl p-6 w-96 shadow-2xl",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"保存对话"}),a.jsx("input",{type:"text",value:$,onChange:e=>I(e.target.value),placeholder:"输入对话名称...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white mb-4"}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-white transition-colors",children:"取消"}),a.jsx("button",{onClick:en,className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-400 hover:to-purple-400 rounded-lg text-white transition-colors",children:"保存"})]})]})}),B&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 border border-cyan-500/30 rounded-2xl p-6 w-96 shadow-2xl",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"重命名对话"}),a.jsx("input",{type:"text",value:K,onChange:e=>P(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white mb-4"}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>V(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-white transition-colors",children:"取消"}),a.jsx("button",{onClick:async()=>{V(!1)},className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-400 hover:to-purple-400 rounded-lg text-white transition-colors",children:"确定"})]})]})})]})}},6041:(e,t,r)=>{r.d(t,{Z:()=>s});var a=r(7577);let s=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))})}};