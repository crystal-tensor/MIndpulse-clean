(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{1859:function(e,t,a){Promise.resolve().then(a.bind(a,9960)),Promise.resolve().then(a.bind(a,3543))},3543:function(e,t,a){"use strict";a.d(t,{default:function(){return A}});var s=a(7437),r=a(2265),l=a(6546),i=a(7011),n=a(6331),o=a(1847),c=a(7233),d=a(1442),m=a(2594),x=a(7842),u=a(7165),h=a(9035),p=a(1331),g=a(6502),f=a(2548),y=a(6310),b=a(1924),j=a(3767),v=a(9672),N=a(9152);let w={zh:{title:"资产配置",subtitle:"Asset Allocation",description:"量子智能资产配置优化",phases:{goal:"目标确认",asset:"资产识别",risk:"风险评估",summary:"配置摘要"},dialogue:{welcomeMessage:"欢迎来到资产配置系统！我是您的量子投资顾问。请先描述您的投资目标，比如：预期收益率、投资期限、风险偏好等。",goalPrompt:"请详细描述您的投资目标。您希望通过这次资产配置达到什么样的投资收益？投资期限是多久？",assetPrompt:"现在让我们了解您可以投资的资产类型。请告诉我您考虑投资的资产有哪些？比如：股票、债券、基金、房地产、黄金等。",riskPrompt:"最后，让我们评估风险约束。请告诉我您的风险承受能力如何？有哪些投资限制或约束条件？",goalPlaceholder:"描述您的投资目标...",assetPlaceholder:"列出您的可投资资产...",riskPlaceholder:"说明风险约束条件...",confirmGoal:"确认目标",confirmAsset:"确认资产",confirmRisk:"确认风险",confirmMessage:{goal:"投资目标信息是否完整？可以进入资产识别了吗？",asset:"资产信息是否完整？可以进入风险评估了吗？",risk:"风险约束信息是否完整？可以进入配置摘要了吗？"},phaseConfirm:{goal:"很好！现在让我们来识别一下您的可投资资产。",asset:"了解了您的资产情况。接下来请告诉我您的风险约束条件。",risk:"明白了您的风险偏好。让我们开始进行量子优化计算。"}},variableTypes:{goal:"目标",asset:"资产",risk:"风险"},computation:{algorithmSelection:"算法选择",quantumAlgorithm:"量子算法(QUBO)",classicalAlgorithm:"经典算法",startComputation:"开始计算",computing:"计算中...",computationComplete:"计算完成",viewReport:"查看报告",recalculate:"重新计算",progress:"进度",iterations:"迭代次数",currentIteration:"当前迭代",energy:"能量",convergence:"收敛性"},report:{title:"资产配置优化报告",optimizationResults:"优化结果",assetTable:{assetName:"资产名称",currentPrice:"当前价格",weightBefore:"优化前权重",weightAfter:"优化后权重",returnRate:"收益率",sharpeRatio:"夏普比率",maxDrawdown:"最大回撤"},portfolioComparison:"组合对比",beforeOptimization:"优化前",afterOptimization:"优化后",returnCurve:"收益率曲线",priceChart:"价格走势图",algorithmComparison:"算法对比",quantumResults:"量子算法结果",classicalResults:"经典算法结果",summarySection:{goalSummary:"投资目标摘要",assetSummary:"资产配置摘要",riskSummary:"风险约束摘要"}},settings:{llmSettings:"LLM设置",provider:"服务提供商",model:"模型",apiKey:"API密钥",temperature:"温度",baseUrl:"基础URL",testConnection:"测试连接",save:"保存",reset:"重置",systemSettings:"系统设置",riskPreference:"风险偏好",quantumBackend:"量子后端",language:"语言",theme:"主题",autoSave:"自动保存",emailNotification:"邮件通知"},status:{idle:"空闲",running:"运行中",completed:"已完成",error:"错误",connecting:"连接中",connected:"已连接",connectionFailed:"连接失败",saving:"保存中",saved:"已保存",extracting:"提取中"},buttons:{send:"发送",confirm:"确认",cancel:"取消",next:"下一步",previous:"上一步",start:"开始",stop:"停止",retry:"重试",close:"关闭",back:"返回"},tabs:{dialogue:"对话",summary:"摘要",quantum:"量子计算",solutions:"解决方案",history:"历史",settings:"设置"},errors:{networkError:"网络错误，请检查网络连接",apiError:"API调用失败，请检查设置",extractionFailed:"变量提取失败，请重试",computationFailed:"计算失败，请检查输入参数",invalidInput:"输入无效，请检查格式",missingApiKey:"缺少API密钥，请在设置中配置",connectionTimeout:"连接超时，请重试"},success:{variablesExtracted:"变量提取成功",computationCompleted:"计算完成",settingsSaved:"设置保存成功",reportGenerated:"报告生成成功"}},en:{title:"Asset Allocation",subtitle:"Asset Allocation",description:"Quantum Intelligent Asset Allocation Optimization",phases:{goal:"Goal Setting",asset:"Asset Identification",risk:"Risk Assessment",summary:"Configuration Summary"},dialogue:{welcomeMessage:"Welcome to the Asset Allocation System! I am your quantum investment advisor. Please first describe your investment goals, such as: expected returns, investment horizon, risk preferences, etc.",goalPrompt:"Please describe your investment goals in detail. What kind of investment returns do you hope to achieve through this asset allocation? What is your investment timeline?",assetPrompt:"Now let's understand the types of assets you can invest in. Please tell me what assets you are considering investing in? For example: stocks, bonds, funds, real estate, gold, etc.",riskPrompt:"Finally, let's assess risk constraints. Please tell me about your risk tolerance. What investment restrictions or constraints do you have?",goalPlaceholder:"Describe your investment goals...",assetPlaceholder:"List your investable assets...",riskPlaceholder:"Explain risk constraints...",confirmGoal:"Confirm Goals",confirmAsset:"Confirm Assets",confirmRisk:"Confirm Risks",confirmMessage:{goal:"Is the investment goal information complete? Can we proceed to asset identification?",asset:"Is the asset information complete? Can we proceed to risk assessment?",risk:"Is the risk constraint information complete? Can we proceed to configuration summary?"},phaseConfirm:{goal:"Great! Now let's identify your investable assets.",asset:"I understand your asset situation. Next, please tell me about your risk constraints.",risk:"I understand your risk preferences. Let's start the quantum optimization calculation."}},variableTypes:{goal:"Goal",asset:"Asset",risk:"Risk"},computation:{algorithmSelection:"Algorithm Selection",quantumAlgorithm:"Quantum Algorithm (QUBO)",classicalAlgorithm:"Classical Algorithm",startComputation:"Start Computation",computing:"Computing...",computationComplete:"Computation Complete",viewReport:"View Report",recalculate:"Recalculate",progress:"Progress",iterations:"Iterations",currentIteration:"Current Iteration",energy:"Energy",convergence:"Convergence"},report:{title:"Asset Allocation Optimization Report",optimizationResults:"Optimization Results",assetTable:{assetName:"Asset Name",currentPrice:"Current Price",weightBefore:"Weight Before",weightAfter:"Weight After",returnRate:"Return Rate",sharpeRatio:"Sharpe Ratio",maxDrawdown:"Max Drawdown"},portfolioComparison:"Portfolio Comparison",beforeOptimization:"Before Optimization",afterOptimization:"After Optimization",returnCurve:"Return Curve",priceChart:"Price Chart",algorithmComparison:"Algorithm Comparison",quantumResults:"Quantum Algorithm Results",classicalResults:"Classical Algorithm Results",summarySection:{goalSummary:"Investment Goal Summary",assetSummary:"Asset Allocation Summary",riskSummary:"Risk Constraint Summary"}},settings:{llmSettings:"LLM Settings",provider:"Provider",model:"Model",apiKey:"API Key",temperature:"Temperature",baseUrl:"Base URL",testConnection:"Test Connection",save:"Save",reset:"Reset",systemSettings:"System Settings",riskPreference:"Risk Preference",quantumBackend:"Quantum Backend",language:"Language",theme:"Theme",autoSave:"Auto Save",emailNotification:"Email Notification"},status:{idle:"Idle",running:"Running",completed:"Completed",error:"Error",connecting:"Connecting",connected:"Connected",connectionFailed:"Connection Failed",saving:"Saving",saved:"Saved",extracting:"Extracting"},buttons:{send:"Send",confirm:"Confirm",cancel:"Cancel",next:"Next",previous:"Previous",start:"Start",stop:"Stop",retry:"Retry",close:"Close",back:"Back"},tabs:{dialogue:"Dialogue",summary:"Summary",quantum:"Quantum",solutions:"Solutions",history:"History",settings:"Settings"},errors:{networkError:"Network error, please check your connection",apiError:"API call failed, please check settings",extractionFailed:"Variable extraction failed, please retry",computationFailed:"Computation failed, please check input parameters",invalidInput:"Invalid input, please check format",missingApiKey:"Missing API key, please configure in settings",connectionTimeout:"Connection timeout, please retry"},success:{variablesExtracted:"Variables extracted successfully",computationCompleted:"Computation completed",settingsSaved:"Settings saved successfully",reportGenerated:"Report generated successfully"}}};var k=a(4084),S=a(6705),C=a(7228);function A(){let[e,t]=(0,r.useState)("zh"),a=w[e],[k,A]=(0,r.useState)("dialogue"),[D,P]=(0,r.useState)(1),[M,I]=(0,r.useState)(""),[R,F]=(0,r.useState)(!1),[E,O]=(0,r.useState)([{id:"welcome",role:"system",content:a.dialogue.welcomeMessage,timestamp:new Date}]),[Z,T]=(0,r.useState)(""),[L,B]=(0,r.useState)([]),[z,q]=(0,r.useState)(!1),[Q,G]=(0,r.useState)([]),[U,_]=(0,r.useState)(null),[H,K]=(0,r.useState)({qubits:8,shots:1024,currentIteration:0,totalIterations:100,energy:[],status:"idle",backend:"IBM Quantum Simulator",eta:"3分钟",algorithm:"quantum"}),[J,W]=(0,r.useState)([]),[V,$]=(0,r.useState)(0),[X,Y]=(0,r.useState)(null),[ee,et]=(0,r.useState)(null),[ea,es]=(0,r.useState)(!1),[er,el]=(0,r.useState)(0),[ei,en]=(0,r.useState)({provider:"deepseek",model:"deepseek-chat",apiKey:"",temperature:.7,baseUrl:""}),[eo,ec]=(0,r.useState)(!1),[ed,em]=(0,r.useState)(!1),[ex,eu]=(0,r.useState)(null),[eh,ep]=(0,r.useState)({riskPreference:.5,quantumBackend:"IBM Quantum Simulator",language:e,emailNotification:!0,autoSave:!0,theme:"dark"}),[eg]=(0,r.useState)("session_".concat(Date.now())),[ef,ey]=(0,r.useState)(!1),[eb,ej]=(0,r.useState)({}),[ev,eN]=(0,r.useState)(""),[ew,ek]=(0,r.useState)(["上证指数"]),eS=(0,r.useRef)(null);(0,r.useRef)(null);let eC=e=>{let{chart:t}=e,a=(e,t)=>{let a=[];for(let s=0;s<e.length;s++)if(s<t-1)a.push("-");else{let r=0;for(let a=0;a<t;a++)r+=e[s-a].close;a.push((r/t).toFixed(2))}return a},r=t.data||[],l=a(r,5),i=a(r,10),n=r.map(e=>[parseFloat(e.open)||0,parseFloat(e.close)||0,parseFloat(e.low)||0,parseFloat(e.high)||0]),o=r.map(e=>e.date);return(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-white mb-4",children:[t.name," (",t.symbol,") - K线图"]}),(0,s.jsx)("div",{className:"bg-gray-800/50 rounded-lg p-4",style:{height:"500px"},children:(0,s.jsx)(C.Z,{option:{backgroundColor:"transparent",title:{text:"".concat(t.name," 股价走势"),textStyle:{color:"#ffffff",fontSize:16},top:10,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#777",textStyle:{color:"#fff"},formatter:function(e){let a="日期: ".concat(e[0].name,"<br/>");return e.forEach(e=>{if(e.seriesName===t.name){let t=e.data;a+="开盘: ".concat(t[1],"<br/>")+"收盘: ".concat(t[2],"<br/>")+"最低: ".concat(t[3],"<br/>")+"最高: ".concat(t[4],"<br/>")}else"MA5"===e.seriesName?a+="MA5: ".concat(e.data,"<br/>"):"MA10"===e.seriesName&&(a+="MA10: ".concat(e.data,"<br/>"))}),a}},legend:{data:[t.name,"MA5","MA10"],textStyle:{color:"#ffffff"},top:35},grid:{left:"10%",right:"10%",top:"20%",bottom:"15%"},xAxis:{type:"category",data:o,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},axisLabel:{color:"#ffffff",formatter:e=>e.slice(5)}},yAxis:{scale:!0,splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}},axisLabel:{color:"#ffffff"},splitLine:{lineStyle:{color:"rgba(255,255,255,0.1)"}}},dataZoom:[{type:"inside",start:70,end:100},{show:!0,type:"slider",top:"90%",start:70,end:100,textStyle:{color:"#ffffff"}}],series:[{name:t.name,type:"candlestick",data:n,itemStyle:{color:"#00da3c",color0:"#ec0000",borderColor:"#00da3c",borderColor0:"#ec0000"},markPoint:{label:{formatter:function(e){return null!=e?Math.round(e.value)+"":""}},data:[{name:"Mark",coord:["2013/5/31",2300],value:2300,itemStyle:{color:"rgb(41,60,85)"}},{name:"highest value",type:"max",valueDim:"highest"},{name:"lowest value",type:"min",valueDim:"lowest"}]}},{name:"MA5",type:"line",data:l,smooth:!0,lineStyle:{color:"#ff6b6b",width:2},showSymbol:!1},{name:"MA10",type:"line",data:i,smooth:!0,lineStyle:{color:"#4ecdc4",width:2},showSymbol:!1}]},style:{height:"100%",width:"100%"},theme:"dark"})}),(0,s.jsx)("div",{className:"mt-4 text-sm text-gray-400",children:"K线图显示股票的开盘、收盘、最高、最低价格信息，包含5日和10日移动平均线"})]})};(0,r.useEffect)(()=>{try{let e=localStorage.getItem("llmSettings");if(e){let t=JSON.parse(e);en(t)}let a=localStorage.getItem("systemSettings");if(a){let e=JSON.parse(a);ep(e),e.language&&t(e.language)}}catch(e){console.error("恢复设置时出错:",e)}},[]),(0,r.useEffect)(()=>{ep(t=>({...t,language:e}))},[e]),(0,r.useEffect)(()=>{eS.current&&(eS.current.scrollTop=eS.current.scrollHeight)},[E]);let eA=(0,r.useMemo)(()=>{if(!L.length)return 0;let e=L.filter(e=>"目标"===e.type).length,t=L.filter(e=>"资产"===e.type).length,a=L.filter(e=>"风险"===e.type).length;return Math.max(0,4===D?100:Math.min(95,(e+t+a)/3*30+(D-1)*25))},[L.length,D,z]);(0,r.useEffect)(()=>{$(eA)},[eA]);let eD=e=>{switch(e){case 1:return a.phases.goal;case 2:return a.phases.asset;case 3:return a.phases.risk;case 4:return a.phases.summary;default:return""}},eP=e=>{switch(e){case 1:return a.dialogue.confirmMessage.goal;case 2:return a.dialogue.confirmMessage.asset;case 3:return a.dialogue.confirmMessage.risk;default:return""}},eM=async()=>{if(!Z.trim())return;let e={id:Date.now().toString(),role:"user",content:Z,timestamp:new Date};O(t=>[...t,e]),T(""),F(!0);try{z||(B([]),q(!0));let e=await fetch("/api/mindpilot/asset-allocation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:Z,phase:D,sessionId:eg,llmSettings:ei})}),a=await e.json();if(e.ok){let e=[];if(a.extracted){var t,s,r,l;null===(t=a.extracted.goals)||void 0===t||t.forEach((t,a)=>{e.push({id:"goal_".concat(Date.now(),"_").concat(a),type:"目标",name:t,value:"实现".concat(t),confidence:.8+.15*Math.random(),weight:.7+.2*Math.random(),editable:!0})});let i=(null===(s=a.extracted.assets)||void 0===s?void 0:s.length)||0,n=i>0?1/i:0;null===(r=a.extracted.assets)||void 0===r||r.forEach((t,a)=>{e.push({id:"asset_".concat(Date.now(),"_").concat(a),type:"资产",name:t,value:"投资".concat(t),confidence:.75+.2*Math.random(),weight:n,editable:!0})}),null===(l=a.extracted.risks)||void 0===l||l.forEach((t,a)=>{e.push({id:"risk_".concat(Date.now(),"_").concat(a),type:"风险",name:t,value:"控制".concat(t),confidence:.85+.1*Math.random(),weight:.5+.4*Math.random(),editable:!0})}),B(t=>{let a=t.map(e=>e.name),s=e.filter(e=>!a.includes(e.name));return[...t,...s]})}let i={id:Date.now().toString(),role:"assistant",content:a.aiResponse||"我已经分析了您的输入并提取了相关信息。",timestamp:new Date};O(e=>[...e,i]),D<=3&&setTimeout(()=>{let t=L.filter(e=>1===D?"目标"===e.type:2===D?"资产"===e.type:3===D&&"风险"===e.type),a=e.filter(e=>1===D?"目标"===e.type:2===D?"资产"===e.type:3===D&&"风险"===e.type),s=[...t.map(e=>e.name),...a.map(e=>e.name)],r={id:Date.now().toString(),role:"system",content:"",timestamp:new Date,phaseSummary:{title:s.length>0?"我已收集到以下".concat(eD(D).replace("收集","").replace("盘点","").replace("识别",""),"："):"正在收集".concat(eD(D).replace("收集","").replace("盘点","").replace("识别",""),"信息..."),items:s.length>0?s:["请继续描述您的".concat(eD(D).replace("收集","").replace("盘点","").replace("识别",""))]}};O(e=>[...e,r]);let l={id:"confirm_".concat(Date.now()),role:"system",content:eP(D),timestamp:new Date,showConfirmButtons:!0};O(e=>[...e,l])},1e3)}else throw Error(a.error||"提取失败")}catch(t){console.error("提取变量错误:",t);let e={id:Date.now().toString(),role:"system",content:a.errors.extractionFailed,timestamp:new Date};O(t=>[...t,e])}finally{F(!1)}},eI=()=>{if(D<3){P(D+1);let e={1:a.dialogue.phaseConfirm.goal,2:a.dialogue.phaseConfirm.asset,3:a.dialogue.phaseConfirm.risk},t={id:Date.now().toString(),role:"assistant",content:e[D],timestamp:new Date};O(e=>[...e,t])}else P(4),A("summary")},eR=async()=>{let e=L.filter(e=>"资产"===e.type).map(e=>e.name);try{let t=await fetch("/api/mindpilot/astock-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assets:e})});if(t.ok){let e=await t.json();return G(e.data),_(e.portfolioData),e}throw Error("获取股票数据失败")}catch(e){return console.error("获取股票数据错误:",e),[]}},eF=async()=>{if(L.length<3){console.log("变量数量不足，需要至少3个变量");return}console.log("开始量子计算，当前变量：",L),K(e=>({...e,status:"running"})),A("quantum");try{let e=await eR();if(console.log("股票数据获取结果：",e),!e||!e.data||0===e.data.length)throw Error("无法获取股票数据");let t=fetch("/api/mindpilot/asset-quantum-solve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({algorithm:H.algorithm,variables:{goals:L.filter(e=>"目标"===e.type).map(e=>e.name),assets:L.filter(e=>"资产"===e.type).map(e=>e.name),risks:L.filter(e=>"风险"===e.type).map(e=>e.name)},stockData:e.data,portfolioData:e.portfolioData})}),a=new Promise(async e=>{for(let e=0;e<=100;e+=2)await new Promise(e=>setTimeout(e,150)),K(t=>({...t,currentIteration:Math.floor(e/2)+1,totalIterations:50,energy:[...t.energy,100*Math.random()-e/2]}));e()}),[s]=await Promise.all([t,a]);if(s.ok){let e=await s.json();console.log("优化结果：",e),e&&e.success&&e.data?(Y(e.data),console.log("optimizationResult已设置:",e.data)):e&&e.result?(Y(e.result),console.log("optimizationResult已设置:",e.result)):(console.error("API返回的数据结构不正确:",e),Y({algorithm:H.algorithm,assets:L.filter(e=>"资产"===e.type).map(e=>({name:e.name,weightBefore:0,weightAfter:e.weight||.25,returnRate:.2*Math.random()-.05,sharpeRatio:2*Math.random(),maxDrawdown:.3*Math.random()})),portfolioMetrics:{expectedReturn:.15*Math.random(),volatility:.25*Math.random(),sharpeRatio:2*Math.random(),maxDrawdown:.3*Math.random()}})),K(e=>({...e,status:"completed"}))}else{let e=await s.json();throw console.error("优化API错误：",e),Error("优化计算失败")}}catch(e){console.error("量子计算错误:",e),K(e=>({...e,status:"error"}))}},eE=e=>({deepseek:[{value:"deepseek-chat",label:"DeepSeek Chat"},{value:"deepseek-coder",label:"DeepSeek Coder"}],openai:[{value:"gpt-4",label:"GPT-4"},{value:"gpt-4o-mini",label:"GPT-4O Mini"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo"}],claude:[{value:"claude-3-haiku",label:"Claude 3 Haiku"},{value:"claude-3-sonnet",label:"Claude 3 Sonnet"},{value:"claude-3-opus",label:"Claude 3 Opus"}]})[e]||[],eO=async()=>{em(!0),eu(null);try{let e=await fetch("/api/mindpilot/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ei)}),t=await e.json();if(e.ok)eu({success:!0,message:"连接成功！模型: ".concat(t.model,", 响应时间: ").concat(t.responseTime,"ms")});else throw Error(t.error||"连接失败")}catch(e){eu({success:!1,message:"连接失败: ".concat(e.message)})}finally{em(!1)}},eZ=()=>{localStorage.setItem("llmSettings",JSON.stringify(ei)),eu({success:!0,message:"LLM设置已保存"})};(0,r.useEffect)(()=>{let e=setTimeout(()=>{(ei.apiKey||ei.baseUrl)&&localStorage.setItem("llmSettings",JSON.stringify(ei))},500);return()=>clearTimeout(e)},[ei]);let eT=()=>{localStorage.setItem("systemSettings",JSON.stringify(eh)),eu({success:!0,message:"系统设置已保存"})},eL=()=>{en({provider:"deepseek",model:"deepseek-chat",apiKey:"",temperature:.7,baseUrl:""}),ep({riskPreference:.5,quantumBackend:"IBM Quantum Simulator",language:"zh",emailNotification:!0,autoSave:!0,theme:"dark"}),localStorage.removeItem("llmSettings"),localStorage.removeItem("systemSettings"),eu({success:!0,message:"所有设置已重置为默认值"})},eB=()=>{let e=L.filter(e=>"资产"===e.type),t={};e.forEach(e=>{t[e.id]=100*e.weight}),ej(t),ey(!0),eN("")},ez=()=>{ey(!1),ej({}),eN("")},eq=()=>{let e=L.filter(e=>"资产"===e.type),t=e.reduce((e,t)=>e+(void 0!==eb[t.id]?eb[t.id]:100*t.weight),0),a="",s={};Math.abs(t-100)>.01?(a="因为调整后的权重总和必须为1，但你修改后的总权重是".concat(t.toFixed(2),"%。所以我做了微调，使得他们的权重总和为100%。"),e.forEach(e=>{let a=void 0!==eb[e.id]?eb[e.id]:100*e.weight;s[e.id]=a/t*100})):e.forEach(e=>{s[e.id]=void 0!==eb[e.id]?eb[e.id]:100*e.weight}),B(L.map(e=>"资产"===e.type&&void 0!==s[e.id]?{...e,weight:s[e.id]/100}:e)),ey(!1),ej({}),a?(eN(a),setTimeout(()=>eN(""),5e3)):(eN("权重修改已确认，总权重为100%。"),setTimeout(()=>eN(""),3e3))},eQ=(e,t)=>{let a=parseFloat(t)||0;ej(t=>({...t,[e]:Math.max(0,Math.min(100,a))}))},eG=e=>{ek(t=>t.includes(e)?t.length>1?t.filter(t=>t!==e):t:[...t,e])},eU=async()=>{if(!X)return;es(!0),A("report");let e=60;el(60);let t=setInterval(()=>{el(--e),e<=0&&clearInterval(t)},1e3);try{let e=await eR(),t=L.filter(e=>"资产"===e.type);console.log("当前资产变量：",t);let a=await fetch("/api/mindpilot/generate-report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({algorithm:H.algorithm,variables:{goals:L.filter(e=>"目标"===e.type).map(e=>e.name),assets:t.map(e=>e.name),risks:L.filter(e=>"风险"===e.type).map(e=>e.name)},optimizationResult:X,stockData:(null==e?void 0:e.data)||Q,portfolioData:(null==e?void 0:e.portfolioData)||U,llmSettings:ei,assetAllocation:t.map(e=>({name:e.name,weight:e.weight,confidence:e.confidence}))})});if(a.ok){let e=await a.json();console.log("生成的报告数据：",e),et(e.report)}else{let e=await a.json();throw console.error("报告生成API错误：",e),Error(e.error||"报告生成失败")}}catch(e){console.error("=== 报告生成错误详情 ==="),console.error("错误对象:",e),console.error("错误消息:",e instanceof Error?e.message:String(e)),console.error("当前状态 - optimizationResult:",X),console.error("当前状态 - variables:",L),console.error("当前状态 - stockData:",Q),et({error:"报告生成失败: ".concat(e instanceof Error?e.message:"未知错误","。请检查网络连接或联系技术支持。"),title:"报告生成错误"})}finally{clearInterval(t),es(!1),el(0)}},e_=e=>{switch(e){case"目标":return l.Z;case"风险":return i.Z;case"资产":return n.Z;default:return o.Z}},eH=e=>{let{variable:t}=e,a=e_(t.type);return(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-4 hover:bg-gray-700/30 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(a,{className:"w-4 h-4 text-purple-400"}),(0,s.jsx)("span",{className:"text-sm font-medium text-purple-400",children:t.type})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["权重: ",(100*t.weight).toFixed(1),"%"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["置信度: ",(100*t.confidence).toFixed(0),"%"]})]})]}),(0,s.jsx)("h4",{className:"text-white font-medium mb-1",children:t.name}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:t.value}),"资产"===t.type&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(100*t.weight,"%")}})})})]})},eK=()=>{if(console.log("=== 报告生成调试信息 ==="),console.log("optimizationResult:",X),console.log("quantumProgress状态:",H.status),console.log("算法类型:",H.algorithm),console.log("变量数据:",L),console.log("股票数据:",Q),A("report"),!X){console.warn("⚠️ optimizationResult为空，无法生成报告"),et({error:"计算结果数据缺失。请确保：1）已完成量子计算 2）计算状态为'completed' 3）重新进行计算",title:"无法生成报告"});return}if(!X.assets||!Array.isArray(X.assets)){console.error("❌ optimizationResult.assets数据结构错误:",X.assets),et({error:"计算结果数据结构异常，assets字段缺失或格式错误",title:"数据结构错误"});return}console.log("✅ optimizationResult验证通过，开始生成报告..."),eU()};return(0,s.jsx)("div",{className:"min-h-screen consciousness-bg",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:a.title}),(0,s.jsx)("p",{className:"text-gray-400",children:a.description})]}),(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:"flex bg-gray-800 rounded-lg p-1",children:[(0,s.jsx)("button",{onClick:()=>t("zh"),className:"px-3 py-1 rounded-md text-sm transition-colors ".concat("zh"===e?"bg-purple-600 text-white":"text-gray-400 hover:text-white"),children:"中文"}),(0,s.jsx)("button",{onClick:()=>t("en"),className:"px-3 py-1 rounded-md text-sm transition-colors ".concat("en"===e?"bg-purple-600 text-white":"text-gray-400 hover:text-white"),children:"English"})]})})]}),(0,s.jsx)("div",{className:"flex space-x-1 mb-8 bg-gray-800/50 rounded-lg p-1",children:[{id:"dialogue",label:a.tabs.dialogue,icon:j.Z},{id:"summary",label:a.tabs.summary,icon:v.Z},{id:"quantum",label:a.tabs.quantum,icon:p.Z},{id:"report",label:"报告",icon:n.Z},{id:"settings",label:"设置",icon:N.Z}].map(e=>(0,s.jsxs)("button",{onClick:()=>A(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(k===e.id?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"),children:[(0,s.jsx)(e.icon,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:e.label})]},e.id))}),(0,s.jsxs)("div",{className:"min-h-[600px]",children:["dialogue"===k&&(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-800/50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:[1,2,3,4].map(e=>{let t=D===e,r=D>e,l=[a.phases.goal,a.phases.asset,a.phases.risk,a.phases.summary];return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"\n                  w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium\n                  ".concat(r?"bg-green-500 text-white":t?"bg-purple-500 text-white":"bg-gray-700 text-gray-400","\n                "),children:r?(0,s.jsx)(c.Z,{className:"w-4 h-4"}):e}),(0,s.jsx)("span",{className:"ml-2 text-sm ".concat(t?"text-white":"text-gray-400"),children:l[e-1]}),e<4&&(0,s.jsx)("div",{className:"w-8 h-0.5 mx-4 ".concat(r?"bg-green-500":"bg-gray-700")})]},e)})}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["完成度: ",V.toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2 space-y-4",children:(0,s.jsxs)("div",{className:"glassmorphism rounded-2xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-purple-400",children:eD(D)}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["阶段 ",D,"/4"]})]}),(0,s.jsxs)("div",{ref:eS,className:"h-96 overflow-y-auto mb-4 space-y-4",children:[E.map(e=>(0,s.jsx)("div",{children:"user"===e.role?(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("div",{className:"bg-purple-600 text-white rounded-lg px-4 py-2 max-w-xs",children:e.content})}):"assistant"===e.role?(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-700 text-gray-100 rounded-lg px-4 py-2 max-w-xs",children:e.content})}):(0,s.jsxs)("div",{className:"text-center",children:[e.phaseSummary&&(0,s.jsxs)("div",{className:"bg-blue-900/30 border border-blue-500/50 rounded-lg p-4 mb-2",children:[(0,s.jsx)("h4",{className:"text-blue-400 font-medium mb-2",children:e.phaseSummary.title}),(0,s.jsx)("ul",{className:"text-sm text-gray-300 space-y-1",children:e.phaseSummary.items.map((e,t)=>(0,s.jsxs)("li",{children:["• ",e]},t))})]}),e.showConfirmButtons&&(0,s.jsxs)("div",{className:"bg-green-900/30 border border-green-500/50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-green-400 mb-3",children:e.content}),(0,s.jsx)("div",{className:"flex justify-center space-x-3",children:(0,s.jsx)("button",{onClick:eI,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:1===D?"确认目标":2===D?"确认资产":3===D?"确认风险":"确认继续"})})]})]})},e.id)),R&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-700 px-4 py-2 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-400"}),(0,s.jsx)("span",{className:"text-sm text-gray-300",children:"分析中..."})]})})})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("input",{type:"text",value:Z,onChange:e=>T(e.target.value),onKeyPress:e=>"Enter"===e.key&&eM(),placeholder:1===D?a.dialogue.goalPlaceholder:2===D?a.dialogue.assetPlaceholder:3===D?a.dialogue.riskPlaceholder:"输入消息...",className:"flex-1 bg-gray-800/50 border border-gray-600 rounded-lg px-4 py-3 focus:border-purple-500 focus:outline-none text-white placeholder-gray-400",disabled:R||D>=4}),(0,s.jsx)("button",{onClick:eM,disabled:R||!Z.trim()||D>=4,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed rounded-lg font-medium transition-all duration-200 text-white",children:"发送"})]})]})}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"glassmorphism rounded-2xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-purple-400",children:"变量提取"}),(0,s.jsx)("button",{className:"p-2 rounded-lg bg-gray-700/50 hover:bg-gray-600/50 transition-colors",children:(0,s.jsx)("span",{className:"text-xl",children:"+"})})]}),0===L.length&&!z&&(0,s.jsx)("div",{className:"text-center py-8 text-gray-400",children:(0,s.jsx)("p",{children:"开始对话后，系统将自动提取决策变量"})}),(0,s.jsx)("div",{className:"space-y-3 mb-4",children:L.map(e=>(0,s.jsx)(eH,{variable:e},e.id))}),L.length>0&&(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-xs text-gray-400 mb-2",children:"统计信息"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-purple-400 font-medium",children:L.filter(e=>"目标"===e.type).length}),(0,s.jsx)("div",{className:"text-gray-500",children:"目标"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-purple-400 font-medium",children:L.filter(e=>"资产"===e.type).length}),(0,s.jsx)("div",{className:"text-gray-500",children:"资产"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-purple-400 font-medium",children:L.filter(e=>"风险"===e.type).length}),(0,s.jsx)("div",{className:"text-gray-500",children:"风险"})]})]})]})]})})]})]}),{}),"summary"===k&&(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"配置摘要"}),ev&&(0,s.jsx)("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(d.Z,{className:"w-5 h-5 text-blue-400 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-blue-200 text-sm",children:ev})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:["目标","资产","风险"].map(e=>{let t=L.filter(t=>t.type===e);return(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white",children:"目标"===e?a.report.summarySection.goalSummary:"资产"===e?a.report.summarySection.assetSummary:a.report.summarySection.riskSummary}),"资产"===e&&!ef&&(0,s.jsx)("button",{onClick:eB,className:"text-purple-400 hover:text-purple-300 transition-colors",title:"编辑权重",children:(0,s.jsx)(m.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-white font-medium",children:e.name}),"资产"===e.type&&(0,s.jsx)("div",{className:"flex items-center space-x-2",children:ef?(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:eb[e.id]||100*e.weight,onChange:t=>eQ(e.id,t.target.value),className:"w-16 px-2 py-1 text-xs bg-gray-700 border border-gray-600 rounded text-white text-center"}),(0,s.jsx)("span",{className:"text-purple-400 text-xs",children:"%"})]}):(0,s.jsxs)("span",{className:"text-purple-400 text-sm",children:[(100*e.weight).toFixed(1),"%"]})})]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:e.value}),"资产"===e.type&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1",children:(0,s.jsx)("div",{className:"bg-purple-500 h-1 rounded-full transition-all duration-300",style:{width:"".concat(ef&&eb[e.id]||100*e.weight,"%")}})})})]},e.id))})]},e)})}),ef&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"text-center",children:(()=>{let e=L.filter(e=>"资产"===e.type).reduce((e,t)=>e+(void 0!==eb[t.id]?eb[t.id]:100*t.weight),0),t=.01>=Math.abs(e-100);return(0,s.jsxs)("div",{className:"inline-flex items-center space-x-2 px-4 py-2 rounded-lg ".concat(t?"bg-green-600/20 border border-green-500/30":"bg-yellow-600/20 border border-yellow-500/30"),children:[(0,s.jsxs)("span",{className:"text-sm ".concat(t?"text-green-400":"text-yellow-400"),children:["当前总权重: ",e.toFixed(2),"%"]}),t?(0,s.jsx)(c.Z,{className:"w-4 h-4 text-green-400"}):(0,s.jsx)(x.Z,{className:"w-4 h-4 text-yellow-400"})]})})()}),(0,s.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,s.jsxs)("button",{onClick:ez,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"取消"})]}),(0,s.jsxs)("button",{onClick:eq,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"确认修改"})]})]})]}),L.length>=3&&!ef&&(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("button",{onClick:eF,disabled:"running"===H.status,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white px-8 py-3 rounded-lg transition-colors flex items-center space-x-2",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:a.computation.startComputation})]})})]}),{}),"quantum"===k&&(0,s.jsx)(()=>{var e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"量子资产配置计算"}),(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:a.computation.algorithmSelection}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>K(e=>({...e,algorithm:"quantum"})),className:"p-4 rounded-lg border-2 transition-colors ".concat("quantum"===H.algorithm?"border-purple-500 bg-purple-500/20":"border-gray-600 hover:border-gray-500"),children:[(0,s.jsx)(p.Z,{className:"w-8 h-8 text-purple-400 mb-2 mx-auto"}),(0,s.jsx)("div",{className:"text-white font-medium",children:"QAOA量子算法"}),(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:"量子近似优化算法"})]}),(0,s.jsxs)("button",{onClick:()=>K(e=>({...e,algorithm:"classical"})),className:"p-4 rounded-lg border-2 transition-colors ".concat("classical"===H.algorithm?"border-blue-500 bg-blue-500/20":"border-gray-600 hover:border-gray-500"),children:[(0,s.jsx)(n.Z,{className:"w-8 h-8 text-blue-400 mb-2 mx-auto"}),(0,s.jsx)("div",{className:"text-white font-medium",children:"蒙特卡洛算法"}),(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:"经典随机优化"})]})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("button",{onClick:eF,disabled:"running"===H.status,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-gray-600 disabled:to-gray-700 text-white px-8 py-3 rounded-lg transition-all duration-200 flex items-center space-x-2 mx-auto",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"开始计算"})]})})]}),("running"===H.status||"completed"===H.status)&&(0,s.jsx)("div",{className:"glassmorphism rounded-lg p-6",children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-purple-400 mx-auto mb-6"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"completed"===H.status?"".concat("quantum"===H.algorithm?"QAOA量子算法":"蒙特卡洛算法","计算完成！"):"".concat("quantum"===H.algorithm?"QAOA量子算法":"蒙特卡洛算法","计算中...")}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:"completed"===H.status?"资产配置优化已完成，可以查看详细结果":"正在优化资产配置，请稍候..."}),(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[(0,s.jsx)("span",{children:"迭代进度"}),(0,s.jsx)("span",{children:"completed"===H.status?"".concat(H.totalIterations,"/").concat(H.totalIterations):"".concat(H.currentIteration,"/").concat(H.totalIterations)})]}),(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-3",children:(0,s.jsx)("div",{className:"h-3 rounded-full transition-all duration-300 ".concat("completed"===H.status?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-purple-500 to-pink-500"),style:{width:"completed"===H.status?"100%":"".concat(H.currentIteration/H.totalIterations*100,"%")}})}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"completed"===H.status?"✅ 计算完成！":"预计剩余时间: ".concat(Math.max(0,Math.ceil((H.totalIterations-H.currentIteration)*.15)),"秒")})]}),H.energy.length>0&&(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"text-sm text-purple-400 mb-2",children:"能量收敛"}),(0,s.jsx)("div",{className:"h-24 flex items-end space-x-1",children:H.energy.slice(-20).map((e,t)=>(0,s.jsx)("div",{className:"bg-purple-500 rounded-t",style:{height:"".concat(Math.max(5,(e+50)/150*100),"%"),width:"4px"}},t))}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["当前能量: ",(null===(e=H.energy[H.energy.length-1])||void 0===e?void 0:e.toFixed(2))||0]})]})]})}),"completed"===H.status&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(d.Z,{className:"w-8 h-8 text-green-400"})}),(0,s.jsx)("h4",{className:"text-lg font-medium text-white mb-2",children:"计算完成"}),(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:"资产配置优化已完成，可以查看详细结果"}),(0,s.jsxs)("div",{className:"mb-4 p-3 bg-gray-800/50 rounded-lg text-left text-xs",children:[(0,s.jsx)("div",{className:"text-yellow-400 mb-1",children:"调试信息："}),(0,s.jsxs)("div",{className:"text-gray-300",children:["计算状态: ",H.status," | 算法: ",H.algorithm," | 结果状态: ",X?"存在":"缺失"]})]}),(0,s.jsx)("button",{onClick:eK,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-colors",children:"查看报告"})]}),"error"===H.status&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(x.Z,{className:"w-8 h-8 text-red-400"})}),(0,s.jsx)("h4",{className:"text-lg font-medium text-white mb-2",children:"计算失败"}),(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:"请检查网络连接或稍后重试"}),(0,s.jsx)("button",{onClick:eF,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-colors",children:"重新计算"})]})]})},{}),"report"===k&&(0,s.jsx)(()=>{var e,t,a,r;return ea?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-8 max-w-md mx-auto",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-purple-400 mx-auto mb-6"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"正在生成专业报告"}),(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:"AI正在分析数据并生成详细的投资报告..."}),er>0&&(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-purple-400 mb-2",children:[Math.floor(er/60),":",(er%60).toString().padStart(2,"0")]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"预计剩余时间"}),(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-4",children:(0,s.jsx)("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-1000",style:{width:"".concat((60-er)/60*100,"%")}})})]}),(0,s.jsx)("div",{className:"mt-6 text-xs text-gray-500",children:"正在处理：资产数据分析 → 风险计算 → 图表生成 → 报告撰写"})]})}):ee?ee.error?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-8 max-w-md mx-auto border border-red-500/50",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-red-400 mb-4",children:ee.title}),(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:ee.error}),(0,s.jsx)("button",{onClick:eU,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-colors",children:"重新生成报告"})]})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:ee.title||"资产配置分析报告"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("button",{onClick:()=>{K(e=>({...e,status:"idle"})),A("quantum")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"重新计算"})]}),(0,s.jsxs)("button",{onClick:()=>A("quantum"),className:"text-purple-400 hover:text-purple-300 flex items-center space-x-2",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"返回计算"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[ee.assetTable&&(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"资产配置详情"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 text-purple-400",children:"资产名称"}),(0,s.jsx)("th",{className:"text-center py-3 px-4 text-purple-400",children:"当前价格"}),(0,s.jsx)("th",{className:"text-center py-3 px-4 text-purple-400",children:"优化前权重"}),(0,s.jsx)("th",{className:"text-center py-3 px-4 text-purple-400",children:"优化后权重"}),(0,s.jsx)("th",{className:"text-center py-3 px-4 text-purple-400",children:"年化收益率"}),(0,s.jsx)("th",{className:"text-center py-3 px-4 text-purple-400",children:"夏普比率"}),(0,s.jsx)("th",{className:"text-center py-3 px-4 text-purple-400",children:"最大回撤"})]})}),(0,s.jsx)("tbody",{children:ee.assetTable.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-gray-700/50 hover:bg-gray-800/30",children:[(0,s.jsx)("td",{className:"py-3 px-4 text-white font-medium",children:e.name}),(0,s.jsx)("td",{className:"py-3 px-4 text-center text-green-400",children:e.currentPrice}),(0,s.jsxs)("td",{className:"py-3 px-4 text-center text-gray-300",children:[e.beforeWeight,"%"]}),(0,s.jsxs)("td",{className:"py-3 px-4 text-center text-purple-400 font-medium",children:[e.afterWeight,"%"]}),(0,s.jsxs)("td",{className:"py-3 px-4 text-center text-blue-400",children:[e.returnRate,"%"]}),(0,s.jsx)("td",{className:"py-3 px-4 text-center text-cyan-400",children:e.sharpeRatio}),(0,s.jsxs)("td",{className:"py-3 px-4 text-center text-red-400",children:[e.maxDrawdown,"%"]})]},t))})]})})]}),(null===(e=ee.chartData)||void 0===e?void 0:e.portfolioChart)&&(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"投资组合与市场指数对比"}),(0,s.jsx)("div",{className:"bg-gray-800/50 rounded-lg p-4",style:{height:"500px"},children:(0,s.jsx)(C.Z,{option:{backgroundColor:"transparent",title:{text:"投资组合表现 vs 上证指数",textStyle:{color:"#ffffff",fontSize:16},top:10,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#777",textStyle:{color:"#fff"}},legend:{data:["优化前组合","优化后组合",...ew],textStyle:{color:"#ffffff"},top:35},grid:{left:"10%",right:"10%",top:"20%",bottom:"15%"},xAxis:{type:"category",data:ee.chartData.portfolioChart.dates,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},axisLabel:{color:"#ffffff",formatter:e=>e.slice(-5)}},yAxis:{scale:!0,splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}},axisLabel:{color:"#ffffff"},splitLine:{lineStyle:{color:"rgba(255,255,255,0.1)"}}},dataZoom:[{type:"inside",start:50,end:100},{show:!0,type:"slider",top:"90%",start:50,end:100,textStyle:{color:"#ffffff"}}],series:[{name:"优化前组合",type:"line",data:ee.chartData.portfolioChart.beforeReturns,lineStyle:{color:"#9CA3AF",width:2},itemStyle:{color:"#9CA3AF"},smooth:!0},{name:"优化后组合",type:"line",data:ee.chartData.portfolioChart.afterReturns,lineStyle:{color:"#A855F7",width:3},itemStyle:{color:"#A855F7"},smooth:!0},...ew.map((e,t)=>{let a={上证指数:"#FF6B6B",深证成指:"#4ECDC4",沪深300:"#45B7D1",中证500:"#96CEB4",创业板指:"#FFEAA7",道琼斯工业指数:"#DDA0DD",纳斯达克指数:"#98D8C8",香港恒生指数:"#F7DC6F",日经指数:"#BB8FCE"},s=["道琼斯工业指数","纳斯达克指数","香港恒生指数","日经指数"].includes(e);return{name:e,type:"line",data:ee.chartData.portfolioChart[e.replace(/指数|工业/,"")]||ee.chartData.portfolioChart.dates.map((e,a)=>{let r=6*Math.sin(.015*a+t)+(Math.random()-.5)*2.5;return s&&(r+=2),r}),lineStyle:{color:a[e]||"#00da3c",width:2,type:s?"dashed":"solid"},itemStyle:{color:a[e]||"#00da3c"},smooth:!0}})]},style:{height:"100%",width:"100%"},theme:"dark"})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h4",{className:"text-sm text-gray-400 mb-2",children:"选择对比指数（可多选）："}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[["上证指数","深证成指","沪深300","中证500","创业板指"].map(e=>(0,s.jsxs)("button",{onClick:()=>eG(e),className:"px-3 py-1 rounded-lg text-sm transition-colors ".concat(ew.includes(e)?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[e," ",ew.includes(e)?"✓":""]},e)),(0,s.jsx)("div",{className:"w-full border-t border-gray-600 my-2"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 mb-1",children:"国际指数："}),["道琼斯工业指数","纳斯达克指数","香港恒生指数","日经指数"].map(e=>(0,s.jsxs)("button",{onClick:()=>eG(e),className:"px-3 py-1 rounded-lg text-sm transition-colors ".concat(ew.includes(e)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[e," ",ew.includes(e)?"✓":""]},e))]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"* 实线表示国内指数，虚线表示国际指数"})]})]}),(null===(t=ee.chartData)||void 0===t?void 0:t.candlestickCharts)&&ee.chartData.candlestickCharts.length>0&&(0,s.jsx)("div",{className:"space-y-6",children:ee.chartData.candlestickCharts.map((e,t)=>(0,s.jsx)(eC,{chart:e},t))}),(null===(a=ee.chartData)||void 0===a?void 0:a.covarianceHeatmap)&&(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:ee.chartData.covarianceHeatmap.title||"资产协方差矩阵热力图"}),(0,s.jsx)("div",{className:"bg-gray-800/50 rounded-lg p-4",style:{height:"400px"},children:(0,s.jsx)(C.Z,{option:{backgroundColor:"transparent",tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",textStyle:{color:"#fff"},formatter:function(e){let t=ee.chartData.covarianceHeatmap.assets[e.data[1]],a=ee.chartData.covarianceHeatmap.assets[e.data[0]],s=e.data[2];return"".concat(t," - ").concat(a,"<br/>协方差: ").concat(s.toFixed(4))}},grid:{height:"80%",top:"10%"},xAxis:{type:"category",data:ee.chartData.covarianceHeatmap.assets,splitArea:{show:!0},axisLabel:{color:"#ffffff",rotate:45}},yAxis:{type:"category",data:ee.chartData.covarianceHeatmap.assets,splitArea:{show:!0},axisLabel:{color:"#ffffff"}},visualMap:{min:Math.min(...ee.chartData.covarianceHeatmap.matrix.flat()),max:Math.max(...ee.chartData.covarianceHeatmap.matrix.flat()),calculable:!0,orient:"horizontal",left:"center",bottom:"5%",textStyle:{color:"#ffffff"},inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffcc","#fee090","#fdae61","#f46d43","#d73027","#a50026"]}},series:[{name:"协方差",type:"heatmap",data:ee.chartData.covarianceHeatmap.matrix.map((e,t)=>e.map((e,a)=>[a,t,e])).flat(),label:{show:!0,color:"#ffffff",formatter:function(e){return e.data[2].toFixed(3)}},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},style:{height:"100%",width:"100%"},theme:"dark"})}),(0,s.jsx)("div",{className:"mt-4 text-sm text-gray-400",children:ee.chartData.covarianceHeatmap.description||"协方差矩阵显示各资产间的相关性，数值越大表示相关性越强"})]}),(null===(r=ee.chartData)||void 0===r?void 0:r.capitalMarketLine)&&"classical"===H.algorithm&&(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"资本市场线与有效前沿"}),(0,s.jsx)("div",{className:"bg-gray-800/50 rounded-lg p-4",style:{height:"400px"},children:(0,s.jsx)(S.x1,{data:{labels:ee.chartData.capitalMarketLine.efficientFrontier.map(e=>(100*e.risk).toFixed(1)),datasets:[{label:"有效前沿",data:ee.chartData.capitalMarketLine.efficientFrontier.map(e=>(100*e.return).toFixed(2)),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",borderWidth:3,fill:!1,pointRadius:2},{label:"资本市场线",data:ee.chartData.capitalMarketLine.capitalMarketLine.map(e=>(100*e.return).toFixed(2)),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,borderDash:[10,5],fill:!1,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"white"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",callbacks:{title:function(e){return"风险: ".concat(e[0].label,"%")},label:function(e){return"".concat(e.dataset.label,": ").concat(e.parsed.y,"%")}}}},scales:{x:{title:{display:!0,text:"风险（波动率）%",color:"white"},ticks:{color:"white"},grid:{color:"rgba(156, 163, 175, 0.3)"}},y:{title:{display:!0,text:"预期收益率 %",color:"white"},ticks:{color:"white"},grid:{color:"rgba(156, 163, 175, 0.3)"}}}}})}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"bg-gray-900/50 rounded-lg p-3",children:[(0,s.jsx)("h4",{className:"text-purple-400 font-medium mb-2",children:"市场组合"}),(0,s.jsxs)("p",{className:"text-gray-300",children:["风险: ",(100*ee.chartData.capitalMarketLine.marketPortfolio.risk).toFixed(2),"%"]}),(0,s.jsxs)("p",{className:"text-gray-300",children:["收益: ",(100*ee.chartData.capitalMarketLine.marketPortfolio.return).toFixed(2),"%"]})]}),(0,s.jsxs)("div",{className:"bg-gray-900/50 rounded-lg p-3",children:[(0,s.jsx)("h4",{className:"text-blue-400 font-medium mb-2",children:"说明"}),(0,s.jsx)("p",{className:"text-gray-400 text-xs",children:"资本市场线展示了在包含无风险资产的情况下可达到的最优风险收益组合"})]})]})]}),ee.executiveSummary&&(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"执行摘要"}),(0,s.jsx)("p",{className:"text-gray-300 leading-relaxed",children:ee.executiveSummary})]}),ee.investmentStrategy&&(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"投资策略"}),(0,s.jsx)("p",{className:"text-gray-300 leading-relaxed",children:ee.investmentStrategy})]}),ee.riskAnalysis&&(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"风险分析"}),(0,s.jsx)("p",{className:"text-gray-300 leading-relaxed",children:ee.riskAnalysis})]}),ee.performanceAnalysis&&(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"绩效分析"}),(0,s.jsx)("p",{className:"text-gray-300 leading-relaxed",children:ee.performanceAnalysis})]}),ee.recommendations&&ee.recommendations.length>0&&(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"投资建议"}),(0,s.jsx)("ul",{className:"space-y-2",children:ee.recommendations.map((e,t)=>(0,s.jsxs)("li",{className:"text-gray-300 flex items-start space-x-2",children:[(0,s.jsx)("span",{className:"text-purple-400 mt-1",children:"•"}),(0,s.jsx)("span",{children:e})]},t))})]}),(0,s.jsxs)("div",{className:"glassmorphism rounded-lg p-6 border border-yellow-500/50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-yellow-400 mb-4",children:"风险提示"}),(0,s.jsx)("p",{className:"text-yellow-300 leading-relaxed",children:ee.disclaimer||"本报告仅供参考，不构成投资建议。投资有风险，入市需谨慎。过往表现不预示未来结果。请根据自身风险承受能力进行投资决策。"})]})]})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(n.Z,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-400",children:"暂无报告数据，请先完成计算"})]})},{}),"settings"===k&&(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"系统设置"}),(0,s.jsxs)("div",{className:"glassmorphism rounded-2xl p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-cyan-400 mb-6",children:"AI模型设置"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-purple-400 mb-2",children:"AI提供商"}),(0,s.jsxs)("select",{value:ei.provider,onChange:e=>en(t=>{var a;return{...t,provider:e.target.value,model:(null===(a=eE(e.target.value)[0])||void 0===a?void 0:a.value)||""}}),className:"w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2",children:[(0,s.jsx)("option",{value:"deepseek",children:"DeepSeek"}),(0,s.jsx)("option",{value:"openai",children:"OpenAI"}),(0,s.jsx)("option",{value:"claude",children:"Anthropic Claude"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-purple-400 mb-2",children:"AI模型"}),(0,s.jsx)("select",{value:ei.model,onChange:e=>en(t=>({...t,model:e.target.value})),className:"w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2",children:eE(ei.provider).map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-purple-400 mb-2",children:"API密钥"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:eo?"text":"password",value:ei.apiKey,onChange:e=>en(t=>({...t,apiKey:e.target.value})),placeholder:"输入API密钥",className:"w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2 pr-10"}),(0,s.jsx)("button",{type:"button",onClick:()=>ec(!eo),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:eo?(0,s.jsx)(g.Z,{className:"w-4 h-4"}):(0,s.jsx)(f.Z,{className:"w-4 h-4"})})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-purple-400 mb-2",children:"创意度"}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:ei.temperature,onChange:e=>en(t=>({...t,temperature:parseFloat(e.target.value)})),className:"w-full"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[(0,s.jsx)("span",{children:"精确 (0.0)"}),(0,s.jsx)("span",{className:"text-cyan-400",children:ei.temperature}),(0,s.jsx)("span",{children:"创意 (1.0)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-purple-400 mb-2",children:"自定义Base URL"}),(0,s.jsx)("input",{type:"url",value:ei.baseUrl,onChange:e=>en(t=>({...t,baseUrl:e.target.value})),placeholder:"可选，使用自定义API端点",className:"w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:eO,disabled:ed,className:"flex-1 px-4 py-2 bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/50 rounded-lg text-sm text-blue-400 transition-colors disabled:opacity-50",children:ed?"测试中...":"测试连接"}),(0,s.jsx)("button",{onClick:eZ,className:"flex-1 px-4 py-2 bg-green-600/20 hover:bg-green-600/30 border border-green-500/50 rounded-lg text-sm text-green-400 transition-colors",children:"保存设置"})]}),ex&&(0,s.jsx)("div",{className:"p-3 rounded-lg text-sm ".concat(ex.success?"bg-green-500/10 border border-green-500/30 text-green-400":"bg-red-500/10 border border-red-500/30 text-red-400"),children:ex.message})]})]})]}),(0,s.jsxs)("div",{className:"glassmorphism rounded-2xl p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-cyan-400 mb-6",children:"系统设置"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-purple-400 mb-2",children:"风险偏好"}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:eh.riskPreference,onChange:e=>ep(t=>({...t,riskPreference:parseFloat(e.target.value)})),className:"w-full"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[(0,s.jsx)("span",{children:"保守 (0.0)"}),(0,s.jsx)("span",{className:"text-cyan-400",children:eh.riskPreference.toFixed(1)}),(0,s.jsx)("span",{children:"激进 (1.0)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-purple-400 mb-2",children:"量子后端"}),(0,s.jsxs)("select",{value:eh.quantumBackend,onChange:e=>ep(t=>({...t,quantumBackend:e.target.value})),className:"w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2",children:[(0,s.jsx)("option",{value:"IBM Quantum Simulator",children:"IBM Quantum Simulator"}),(0,s.jsx)("option",{value:"Rigetti QPU",children:"Rigetti QPU"}),(0,s.jsx)("option",{value:"本地模拟器",children:"本地模拟器"}),(0,s.jsx)("option",{value:"Google Quantum AI",children:"Google Quantum AI"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-purple-400 mb-2",children:"主题设置"}),(0,s.jsxs)("select",{value:eh.theme,onChange:e=>ep(t=>({...t,theme:e.target.value})),className:"w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2",children:[(0,s.jsx)("option",{value:"dark",children:"深色模式"}),(0,s.jsx)("option",{value:"light",children:"浅色模式"}),(0,s.jsx)("option",{value:"auto",children:"跟随系统"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-purple-400 mb-2",children:"语言设置"}),(0,s.jsxs)("select",{value:eh.language,onChange:e=>ep(t=>({...t,language:e.target.value})),className:"w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2",children:[(0,s.jsx)("option",{value:"zh",children:"中文"}),(0,s.jsx)("option",{value:"en",children:"English"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-purple-400 mb-2",children:"通知设置"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:eh.emailNotification,onChange:e=>ep(t=>({...t,emailNotification:e.target.checked})),className:"rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"运行完毕邮件通知"})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:eh.autoSave,onChange:e=>ep(t=>({...t,autoSave:e.target.checked})),className:"rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"自动保存对话"})]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:eT,className:"flex-1 px-4 py-2 bg-green-600/20 hover:bg-green-600/30 border border-green-500/50 rounded-lg text-sm text-green-400 transition-colors",children:"保存系统设置"}),(0,s.jsx)("button",{onClick:eL,className:"flex-1 px-4 py-2 bg-red-600/20 hover:bg-red-600/30 border border-red-500/50 rounded-lg text-sm text-red-400 transition-colors",children:"重置所有设置"})]})]})]})]})]}),{})]})]})})}k.kL.register(k.uw,k.f$,k.od,k.jn,k.Dx,k.u,k.De)}},function(e){e.O(0,[674,883,858,968,960,971,117,744],function(){return e(e.s=1859)}),_N_E=e.O()}]);